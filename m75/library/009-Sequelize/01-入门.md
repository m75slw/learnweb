## 入门
> 约定sequelize为实例，Sequelize为库本身

### 介绍
Sequelize是一个基于`promise`的Node.js `ORM(Object-Relational Mapping)`,目前支持`Postgres`、`MySQL`、`MariaDB`、`SQLite`、`SQL Server`,具有强大的事务支持、关联关系、预读和延迟加载、读取复制等功能。遵从语义版本控制，支持`Node V10`以及更高版本。

### egg中安装和配置

**安装**
```cmd
npm install --save egg-sequelize mysql2  

```

**在`config/plugin.js`中引入egg-sequelize插件**
```js
exports.sequelize = {
    enable: true,
    package: 'egg-sequelize',
};
```

**在`config/config.default.js`中配置插件**
```js
config.sequelize = {
    dialect: 'mysql', //数据源 mysql
    host: 'localhost', //host地址
    user: 'root',   //数据库用户名
    password: '000215',//数据库密码
    port: 3306, //端口号
    database: 'aishe',//数据库
};
```

**在`app/model`目录下编写Model**
```js
module.exports = app =>{   //chapter.js
    const { STRING, INTEGER, DATE } = app.Sequelize;
    const Chapter = app.model.define('chapter', {
        chid: { type: INTEGER.UNSIGNED, primaryKey: true, autoIncrement: true },
        chname: {type:STRING(50) ,allowNull:false},
        chduration:{type:INTEGER,allowNull:false},
        chvideo:{type:STRING,allowNull:false},
        cid:{type:INTEGER,allowNull:false},
    },{
        tableName: 'chapter',
        timestamps: false
    });
    return Chapter;
}
```  
**这个Model可以在Controller和Service中通过`app.model.Chapter`或`ctx.model.Chapter`访问**

> 这里`app.model.Chapter`中的Chapter是js文件名  


```md
- 对数据库的操作写在Service下
- 再在Ctroller中调用，处理
- 最后将Ctroller挂载到路由

```